Tags: [[_My_projects]]
#MyProjects 

# Introduction
This section explains what Azure resources and files we create using Terraform and how.

We have there the main.tf file which creates all the resources. That file uses modules defined in the terraform_linux_vm > modules folder. Each module is dedicated to creating one type of resource in Azure.
## Resources created
Resources which we create are:
- Two resource groups
- Log Analytics workspace - For AKS monitoring.
- AKS
- ACR - For storing Docker images used when deploying resources on AKS.
- Service Principal - It will be used in the Dockerfile generated by Terraform for authentication when interacting with AKS and ACR. It has the following scopes and roles:
    - Role 'acrpush' with scope for ACR - Enable pulling images from ACR when deploying resources on Kubernetes
    - Role 'Contributor' with scope for ACR - Enable pushing images to ACR using Azure CLI
    - Role 'Azure Kubernetes Service Cluster User Role' with scope for AKS - Enable getting credentials to AKS (creating .kube/config file)
      using the 'az aks get-credentials' command.
- Storage Account with:
    - Container - Which will act as an artifact store for MLflow Tracking Server.
    - File share - Where we will store MLflow project files and which will be mounted into the Job running MLflow project
## Files generated by Terraform (using template files)
Additionally Terraform saves files on the host where we run Terraform code:
- Dockerfile:
    - Used to run a container with prepared environment to interact with AKS
    - Saved in the docker folder
- values.yaml x2:
    - Two values.yaml files used in Helm charts:
    - Saved in the mlflow_project and mlflow_setup folders in the docker > helm_charts folder.

In the template_files folder we have templates of those files. We will interpolate them (insert variables values) and save on the localhost.
## Terraform outputs
Terraform creates multiple outputs with information about created resources. They are not needed to use code from this repo but might be useful in some situations. They can be accessed by running the command:
>terraform output
## Kubeconfig file
It is possible to use Terraform to save on our local machine a kubeconfig file when creating AKS but we don't do this since we generate a kubeconfig file in a Docker image using Azure CLI.